var karacos = require('karacos');

/**
 * Parent for containing objects
 * Parent can contain documents
 */
Parent = karacos.model.Document.extend({
	init: function(values){
		this._super(values);
	},
	map:{
		$$childrens: { variable: "childrenId", cmd: "lrange", key: "Parent:{id}:childrens", args: [0, 20] },
	    childrens: [{
	        id: "Document:{childrenId}:id",
	        name: "Document:{childrenId}:name",
	    }]
	}
}, 'Parent');

Parent.create = function(data, callback){
	if (typeof data.childrens === "undefined") {
		data.childrens = [];
	}
	karacos.model.Document.create(data, function(err,res){
		if (typeof callback !== "undefined")
			callback(err,res);
	});
}